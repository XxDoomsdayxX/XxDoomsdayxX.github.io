<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Stock Vault</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles/stock-vault-css.css" type="text/css" />
</head>

<body>
    <header>
        <nav class="header-links" aria-label="StockVault resources">
            <a href="/index.html" id="page-top" class="btn">< Back</a>
            <a class="btn" href="https://github.com/XxDoomsdayxX/StockVault/tree/enhancement_three" target="_blank" rel="noopener">Source</a>
            <a class="btn" href="https://github.com/XxDoomsdayxX/StockVault#readme" target="_blank" rel="noopener">README</a>
            <a class="btn" href="#section5" rel="noopener">Enhancement Process</a>
            <a class="btn" href="#database" rel="noopener">Database</a>
        </nav>
    </header>

    <main>
        <div id="section1">
            <div id="title">
                <p>Stock Vault(Java/Android)</p>
            </div>
            <p id="p1">Android app to track inventory with typo-tolerant search, restock priority, and per-item alerts.</p>
            <div id="container">
                <img src="/images/smartphone.png" alt="Smartphone Container" class="device-frame" />
                <button class="nav-arrow nav-left" aria-label="Previous screen" onclick="slideLeft()">&#10094;</button>
                <div id="device-screen">
                    <div class="device-content">
                        <img src="/images/loading-logo.png" alt="Loading Logo" />
                        <img src="/images/login-screen.png" alt="Login Screen" />
                        <img src="/images/register-screen.png" alt="Register Screen" />
                        <img src="/images/inventory-page.png" alt="Inventory Screen" />
                        <img src="/images/settings.png" alt="Inventory Screen w/settings" />
                        <img src="/images/inventory-search.png" alt="Inventory Search" />
                        <img src="/images/notification-screen.png" alt="Notification Screen" />
                        <img src="/images/loading-logo.png" alt="Loading Logo" />
                        <img src="/images/dark-login-screen.png" alt="Login Screen" />
                        <img src="/images/dark-register-screen.png" alt="Register Screen" />
                        <img src="/images/dark-inventory-page.png" alt="Inventory Screen" />
                        <img src="/images/dark-settings.png" alt="Inventory Screen w/settings" />
                        <img src="/images/dark-inventory-search.png" alt="Inventory Search" />
                        <img src="/images/dark-notification-screen.png" alt="Notification Screen" />
                    </div>
                </div>
                <button class="nav-arrow nav-right" aria-label="Next screen" onclick="slideRight()">&#10095;</button>
            </div>
        </div>
        <div id="section2">
            <div class="details">
                <h1>Description:</h1>
                <p>
                    StockVault is a lightweight Android (Java) app for tracking inventory.
                    You can add items, edit quantity and price, search with typos, and get alerts before you run out.
                    Data is saved locally in SQLite so it works offline and stays private.
                </p>
                <p>
                    Completed as part of my personal graduation project for CS-499 Computer Science Capstone at Southern New Hampshire University.
                </p>
            </div>
            <div class="details">
                <h1>Problems StockVault Solves:</h1>
                <p>Restocking on time: Surfaces items closest to their low-stock thresholds so you know what to buy next.</p>
                <p>Finding items fast: Lets you search even with typos (“milk” vs “mikl”) and filters the list as you type.</p>
                <p>Editing without friction: Long-press to edit right in the list—no extra screens or forms.</p>
                <p>Works offline: Local storage keeps the app quick and usable anywhere.</p>
            </div>
        </div>
        <div id="section3">
            <div id="container2">
                <div class="feature">
                    <h3>Feature One</h3>
                    <h4>Smart Inventory Engine</h4>
                    <ul>
                        <li>Restock-priority sorting: Items are ranked by urgency (quantity minus low-stock threshold), then by age (older first), then by name. This ensures the most important items float to the top.</li>
                        <li>Live fuzzy search: A small, optimized edit-distance function powers typo-tolerant search. Results update after a short debounce (≈300 ms) so filtering feels instant without janky reflows.</li>
                        <li>Fast UI updates: The app keeps an in-memory list of items. When you edit or add an item, it updates the list, re-sorts, and re-renders no full database reload.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Feature Two</h3>
                    <h4>Per-Item Alerts & Preferences</h4>
                    <ul>
                        <li>Aging alerts: Optional date-based notifications remind you when items have been sitting too long (e.g., 30+ days).</li>
                        <li>Android-native notifications: Uses a dedicated notification channel and supports Android 13 permission flow. Tapping a notification takes you right back into the app.</li>
                        <li>Settings screen per item to enable/disable SMS-style alerts and set thresholds.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Feature Three</h3>
                    <h4>Inline Editing with Reliable Persistence</h4>
                    <ul>
                        <li>Long-press to edit quantity or price directly in the list.</li>
                        <li>Changes persist to SQLite via a repository layer, then auto re-sort and re-render.</li>
                        <li>Safer parsing/validation and clear user feedback (toasts/logs) on every action.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="section4">
            <h1>How it works (under the hood)</h1>
            <div id="container3">
                <div class="feature">
                    <h3>Platform & storage</h3>
                    <ul>
                        <li>Android + SQLite: Data lives locally for speed and offline use. A SQLiteOpenHelper (InventoryDatabase) manages schema creation and migrations.</li>
                        <li>Schema highlights: inventory table tracks name, quantity, price, date added, and per-item notification prefs (threshold, alert toggles).</li>
                        <li>SQLite item_prefs table stores per-item alert settings (ID-keyed). SharedPreferences/DataStore is used only for lightweight UI state.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Algorithms & data structures</h3>
                    <ul>
                        <li>Restock comparator: Custom comparator ranks items by (quantity − threshold), then by age, then by name—simple, stable, and effective.</li>
                        <li>Fuzzy search: An efficient edit-distance function (dynamic programming) handles short strings like item names. It runs only on the in-memory list after a debounce to keep typing smooth.</li>
                        <li>In-memory cache: The full item list is stored in memory, then filtered/sorted for rendering. This keeps UI snappy and reduces DB churn.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Notifications</h3>
                    <ul>
                        <li>Channels & permissions: Creates a channel on Android 8+ and requests POST_NOTIFICATIONS on Android 13+.</li>
                        <li>Tap-through: Notifications include a PendingIntent that opens InventoryActivity.</li>
                        <li>When they fire: Checks run on list refresh (add/edit/delete/return to screen). A background scheduler (e.g., WorkManager) can be added later if needed.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>UX details that matter</h3>
                    <ul>
                        <li>One-tap add: Quick form for name, qty, and price; date auto-filled.</li>
                        <li>Inline validation: Clear messages if fields are empty or invalid.</li>
                        <li>No surprises: After each change, the list re-sorts and the user sees the result immediately.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Security & privacy notes</h3>
                    <ul>
                        <li>Local-first design: All data is stored on device. No network by default.</li>
                        <li>No remote auth; the login shown is demo-only for UI. A production build would hash credentials (or use Google/biometric) and include a privacy policy.</li>
                        <li>Permissions: Only requests notification permission when needed.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Performance choices</h3>
                    <ul>
                        <li>Debounced text input reduces needless filtering while typing.</li>
                        <li>Single-pass edit distance is used for short names—fast enough for mobile lists.</li>
                        <li>Selective redraws: Edits update the in-memory model and re-render the visible list.</li>
                    </ul>
                </div>
                <div class="feature">
                    <h3>Testing & reliability</h3>
                    <ul>
                        <li>Manual smoke tests: Add, edit, delete, and search paths verified across Android versions, including notification permission behavior.</li>
                        <li>Logging: Targeted Log.d/Log.e statements help trace insert/update/notify flows during development.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="section5">
            <h1>Enhancement Process - Before & After</h1>
            <div class="container4">
                <div class="title">
                    <p>1.)  Search: exact match &rarr; fuzzy, debounced filtering</p>
                </div>
                <div class="before">
                    <h3>Before (exact, no debounce – brittle & jumpy on large lists)</h3>
                    <pre>
                    <code class="language-java">
                            searchField.addTextChangedListener(new TextWatcher() {
                                public void onTextChanged(CharSequence s, int start, int before, int count) {
                                    String q = s.toString().toLowerCase();
                                    List<Item> show = new ArrayList<>();
                                    for (Item it : allItems) {
                                        if (it.name.toLowerCase().contains(q)) show.add(it);
                                    }
                                    renderRows(show); // runs every keystroke
                                }
                                public void beforeTextChanged(CharSequence s, int a, int b, int c) {}
                                public void afterTextChanged(Editable s) {}
                            });
                        </code>
                    </pre>
                </div>
                <div class="after">
                    <h3>After (fuzzy search + debounce – smooth & typo-tolerant)</h3>
                    <pre>
                    <code class="language-java">
                            private static final long SEARCH_DEBOUNCE_MS = 300L;
                            private final Handler searchHandler = new Handler(Looper.getMainLooper());
                            private Runnable searchTask = null;
                            private String lastQuery = "";

                            searchField.addTextChangedListener(new TextWatcher() {
                                public void onTextChanged(CharSequence s, int start, int before, int count) {
                                    if (searchTask != null) searchHandler.removeCallbacks(searchTask);
                                    final String q = s.toString().trim();
                                    searchTask = () -> { if (!q.equals(lastQuery)) { lastQuery = q; filterAndRender(q); } };
                                    searchHandler.postDelayed(searchTask, SEARCH_DEBOUNCE_MS);
                                }
                                public void beforeTextChanged(CharSequence s, int a, int b, int c) {}
                                public void afterTextChanged(Editable s) {}
                            });

                            // Inside filterAndRender(...)
                            int dist = editDistance(qLower, nameLower);
                            boolean matches = nameLower.contains(qLower) || dist <= 2;
                        </code>
                    </pre>
                </div>
            </div>
            <p>Result: Faster feel while typing, better matches with minor typos, fewer unnecessary UI redraws.</p>
        </div>
        <hr />
        <div id="section6">
            <div class="container4">
                <div class="title">
                    <p>2.)  Sorting: “added order” &rarr; restock-priority comparator</p>
                </div>
                <div class="before">
                    <h3>Before (implicit: whatever order the DB returned)</h3>
                    <pre>
                    <code class="language-java">
                            Cursor c = db.query("inventory", null, null, null, null, null, null);
                            // render in cursor order
                        </code>
                    </pre>
                </div>
                <div class="after">
                    <h3>After (urgent items first, then age, then name)</h3>
                    <pre>
                    <code class="language-java">
                            Collections.sort(allItems, (a, b) -> {
                                int ua = a.quantity - a.lowStockThreshold;
                                int ub = b.quantity - b.lowStockThreshold;
                                int byUrgency = Integer.compare(ua, ub);        // lower margin = more urgent
                                if (byUrgency != 0) return byUrgency;
                                int byAge = Integer.compare(daysSince(b.date), daysSince(a.date)); // older = higher priority
                                if (byAge != 0) return byAge;
                                return a.name.compareToIgnoreCase(b.name);
                            });
                        </code>
                    </pre>
                </div>
            </div>
            <p>Result: The most critical items bubble to the top so restocking decisions are immediate and obvious.</p>
        </div>
        <hr />
        <div id="section6">
            <div class="container4">
                <div class="title">
                    <p>3.)  Notifications: global toggles &rarr; per-item preferences</p>
                </div>
                <div class="before">
                    <h3>Before (one-size-fits-all)</h3>
                    <pre>
                    <code class="language-java">
                            SharedPreferences sp = getSharedPreferences("Notif", MODE_PRIVATE);
                            boolean enableSms = sp.getBoolean("enableSms", false); // global
                            int threshold = sp.getInt("threshold", 5);              // global for all items
                        </code>
                    </pre>
                </div>
                <div class="after">
                    <h3>After (per item ID)</h3>
                    <pre>
                    <code class="language-java">
                            SharedPreferences perItem = getSharedPreferences("ItemNotificationPreferences", MODE_PRIVATE);
                            boolean enableSms = perItem.getBoolean("enableSms_" + itemId, false);
                            int lowStockThreshold = Integer.parseInt(perItem.getString("threshold_" + itemId, "5"));
                            boolean enableDateNotification = perItem.getBoolean("enableDateNotification_" + itemId, false);
                            int dateThresholdDays = Integer.parseInt(perItem.getString("dateThreshold_" + itemId, "30"));
                        </code>
                    </pre>
                </div>
            </div>
            <p>Result: Users can tailor alerts per item (e.g., rice at 5, batteries at 2, milk with a 7-day age warning). Fewer noisy notifications, more signal.</p>
        </div>
        <hr />
        <div id="section6">
            <div class="container4">
                <div class="title">
                    <p>4.)  Editing: multi-screen forms &rarr; inline edits with instant resort</p>
                </div>
                <div class="before">
                    <h3>Before (navigate away, edit, save, come back)</h3>
                    <pre>
                    <code class="language-java">
                            row.setOnClickListener(v -> {
                                Intent i = new Intent(this, EditItemActivity.class);
                                i.putExtra("id", it.id);
                                startActivity(i);
                            });
                        </code>
                    </pre>
                </div>
                <div class="after">
                    <h3>After (long-press cell &rarr; inline edit &rarr; persist &rarr; resort and re-render)</h3>
                    <pre>
                    <code class="language-java">
                            qtyView.setOnLongClickListener(v -> {
                                EditText editQty = new EditText(this);
                                editQty.setText(String.valueOf(it.quantity));
                                row.removeView(qtyView);
                                row.addView(editQty, 1);

                                editQty.setOnEditorActionListener((v1, aId, ev) -> {
                                    int newQty = safeInt(editQty.getText().toString(), -1);
                                    if (newQty < 0) { toast("Enter a valid quantity."); return true; }

                                    repo.updateItem(it.id, it.name, newQty, it.price, it.date,
                                                    it.lowStockThreshold, it.enableSms, it.enableDateNotification);

                                    it.quantity = newQty;                // update in-memory
                                    row.removeView(editQty);
                                    row.addView(qtyView, 1);
                                    qtyView.setText(String.valueOf(newQty));

                                    reSortAndRender();                   // instant resort + refresh
                                    return true;
                                });
                                return true;
                            });
                        </code>
                    </pre>
                </div>
            </div>
            <p>Result: Quick edits in place, no extra navigation, and the list instantly reorders to reflect urgency.</p>
        </div>
        <hr />
        <div id="section6">
            <div class="container4">
                <div class="title">
                    <p>5.)  Rendering: full reloads &rarr; targeted refresh with in-memory model</p>
                </div>
                <div class="before">
                    <h3>Before</h3>
                    <pre>
                    <code class="language-java">
                            updateItem(...){
                            db.update(...);
                            loadInventoryItems(); // re-query everything and rebuild the UI
                            }
                        </code>
                    </pre>
                </div>
                <div class="after">
                    <h3>After</h3>
                    <pre>
                    <code class="language-java">
                            updateItem(...){
                            db.update(...);     // persist
                            it.quantity = newQty; // update in-memory model
                            reSortAndRender();  // resort + render currently visible rows only
                            }
                        </code>
                    </pre>
                </div>
            </div>
            <p>Result: Snappier UI and less database churn-especially noticeable on lower-end devices.</p>
        </div>
        <hr />
        <div id="database">
            <div id="database-intro">
                <h1>Database</h1>
                <p><b>Stack:</b> SQLite (SQLiteOpenHelper) + SharedPreferences (per-item alert toggles).</p>
                <p><b>Why:</b> Fast, offline-first storage with simple, reliable reads/writes.</p>
            </div>

            <div id="database-section2">
                <div class="db-sec2">
                    <h3>Schema (minimal)</h3>
                    <pre>
                    <code>
                            CREATE TABLE items (
                                id INTEGER PRIMARY KEY AUTOINCREMENT,
                                name TEXT NOT NULL,
                                quantity INTEGER NOT NULL DEFAULT 0,
                                low_stock_threshold INTEGER NOT NULL DEFAULT 5,
                                price REAL NOT NULL DEFAULT 0,
                                date_added INTEGER NOT NULL,
                                last_updated INTEGER NOT NULL
                            );

                            CREATE TABLE item_prefs (
                                item_id INTEGER PRIMARY KEY REFERENCES items(id) ON DELETE CASCADE,
                                enable_qty_alert INTEGER NOT NULL DEFAULT 0,
                                enable_age_alert INTEGER NOT NULL DEFAULT 0,
                                age_days_threshold INTEGER NOT NULL DEFAULT 30
                            );
                        </code>
                    </pre>
                </div>
                <div class="db-sec2">
                    <div>
                        <h3>Restock order (urgent → older → name)</h3>
                        <pre>
                        <code>
                                SELECT * FROM items
                                ORDER BY (quantity - low_stock_threshold) ASC,
                                    (strftime('%s','now') - date_added) DESC,
                                    name COLLATE NOCASE ASC;
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>Low-stock filter</h3>
                        <pre>
                        <code>
                                SELECT id,name,quantity,low_stock_threshold
                                FROM items
                                WHERE quantity <= low_stock_threshold;
                            </code>
                        </pre>
                    </div>
                </div>
            </div>
            <div id="db-section3">
                <div class="db-s3">
                    <h3>Data flow & reliability</h3>
                    <ul>
                        <li>Load rows → keep an in-memory list for instant sort/filter.</li>
                        <li>Inline edits: transactional UPDATE, then resort & re-render visible rows.</li>
                        <li>Basic constraints + defaults prevent bad data (e.g., negative qty).</li>
                    </ul>
                </div>
                <div class="db-s3">
                    <h3>Small roadmap</h3>
                    <ul>
                        <li>Move to Room DAOs & migrations.</li>
                        <li>Add FTS5 for larger, typo-tolerant search.</li>
                        <li>Filter Button to allow user control of how the table filters.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="snhu">
            <h1>SNHU Capstone Enhancements</h1>
            <div id="video-sec">
                <h3 style="text-align:left">Informal Code Review Video:</h3>
                <video controls="controls">
                    <source src="../videos/video-review.mp4" type="video/mp4" />
                </video>
            </div>
            <div id="enhancements">
                <div class="enhancement">
                    <h3>Enhancement One: Software Design and Engineering</h3>
                    <h5>Artifact (what/when).</h5>
                    <p> 
                        StockVault Android app (Java). Core screens and architecture created during CS-499 (2025),
                        with enhancements to the inventory list, editing flow, and notifications.
                    </p>
                    <h5>Why it's in my ePortfolio.</h5>
                    <p>
                        This artifact shows end-to-end software design: requirements, UI flow, and a maintainable code structure.
                        The enhancement moved the app from a basic CRUD list to a well-engineered product:
                    </p>
                    <ul>
                        <li>Replaced multi-screen edit forms with inline editing and clear validation.</li>
                        <li>Introduced a repository layer between UI and SQLite for cleaner separation.</li>
                        <li>Added Android notification channels and a settings surface.</li>
                    </ul>
                    <h5>What I learned / challenges / feedback.</h5>
                    <p>
                        I learned how small design choices (like editing in place) reduce friction and increase reliability. The biggest challenge was avoiding full list reloads after writes;
                        I solved this with an in-memory model and selective re-renders. Peer feedback pushed me to improve error messages and empty states.
                        Outcomes met. Software design principles (modularity, separation of concerns), usability, and basic DevOps (release build/signing prep).
                        Not fully met. Automated UI test coverage and CI are limited; I plan to add Espresso tests and a build pipeline.
                    </p>
                </div>
                <div class="enhancement">
                    <h3 style="text-align: center">Enhancement Two: Algorithms and Data Structure</h3>
                    <h5>Artifact (what/when).</h5>
                    <p>The inventory list logic and search/sort engine, refined during CS-499 (2025).</p>
                    <h5>Why it’s in my ePortfolio.</h5>
                    <p>It demonstrates practical algorithm use inside a mobile app:</p>
                    <ul>
                        <li>Restock-priority comparator: orders by (quantity − threshold), then by age, then name—simple, stable, and effective.</li>
                        <li>Fuzzy search with debounce: a lightweight edit-distance check plus ~300 ms debounce to keep typing smooth.</li>
                        <li>In-memory caching: the full item list is kept in memory, then filtered/sorted for rendering.</li>
                    </ul>
                    <h5>What I learned / challenges / feedback.</h5>
                    <p>
                        I saw how the right O(1)/O(n) choices matter more than heavy frameworks on phones. Debouncing removed jank;
                        a single-pass edit-distance was “good enough” for short names. The main challenge was balancing accuracy and speed;
                        feedback led me to cap the distance check and prefer prefix matches first.
                        Outcomes met. Applied algorithms for ranking and text matching; performance tuning and responsiveness.
                        Not fully met. No advanced IR (e.g., FTS5) yet; that’s on my roadmap for larger datasets.
                    </p>
                </div>
                <div class="enhancement">
                    <h3 style="text-align: right">Enhancement Three: Databases</h3>
                    <h5>Artifact (what/when).</h5>
                    <p>SQLite schema and data layer for StockVault, built/enhanced during CS-499 (2025).</p>
                    <h5>Why it’s in my ePortfolio.</h5>
                    <p>It shows I can design and ship a reliable offline-first data model:</p>
                    <ul>
                        <li>Tables: items (name, qty, price, thresholds, timestamps) and item_prefs (per-item alerts).</li>
                        <li>Transactions for edits, constraints/defaults to prevent bad data, and indexes for name search/restock queries.</li>
                        <li>A clear migration path (adding last_updated, indexing, etc.).</li>
                    </ul>
                    <h5>What I learned / challenges / feedback.</h5>
                    <p>
                        I learned to keep the schema lean and let the UI cache do the heavy lifting. The challenge was avoiding extra DB churn;
                        I now update the row, re-sort in memory, and only re-render what’s visible. Feedback from testing led me to add better input checks and to separate alert prefs from item rows.
                        Outcomes met. Data modeling, persistence, and reliability (transactions, indexes).
                        Not fully met. No encryption-at-rest or cloud sync yet; planned next are Room/DAO migration, CSV import/export, and optional SQLCipher.
                    </p>
                </div>
            </div>
        </div>

        <div id="last-section">
            <p>For more information and details, Please visit the <a href="https://github.com/XxDoomsdayxX/StockVault/tree/main">Source page</a> to view the README.md</p>
            <p><b>NOTE:</b>This project was designed and created by me as my first Java/Android Project.</p>
        </div>
    </main>

    <footer>
        <p id="copy">&copy; <span id="year">2025</span> Darrell Walker All rights reserved.</p>
    </footer>

    <script defer src="scripts/stockvault-script.js"></script>
</body>

</html>